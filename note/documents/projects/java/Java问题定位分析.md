# 排查Linux系统CPU过高的占用问题相关

## 分析出CPU占用过高的原因

- 使用top

- 命令查看占用CPU过高进程ID，大写M命令可以按照CPU使用率排序

- 查看该进程的哪个线程使用的CPU比较高，使用`ps -mp pid -o THREAD,tid,time`命令输入上面查出的`pid`查看哪个线程的CPU使用率比较高

- 将线程ID转化成16进制，便于在JVM中进行查找，在linux系统中可以使用`printf "%x\n" 十进制线程id`将十进制转化成十六进值

- 使用`jstack`命令查找出当前的内存状态，命令为：`jstack 进程id|线程id -A 30`命令进行查找
  
  ## jstack的作用
  
  `jstack`命令用于生成虚拟机当前时刻的线程快照，线程快照就是当前虚拟机内每一条线程正在执行的方法的堆栈的集合，生成线程快照的目的是定位线程出现长时间停顿的原因，如线程之间的死所，死循环、请求外部资源导致的长时间刮起等都是导致线程长时间停顿的原因。线程出现停顿的时候来查看各个线程的调用堆栈，就可以知道没有响应的线程是什么原因。
